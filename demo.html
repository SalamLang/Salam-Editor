<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>سلام</title>
</head>
<body>
<script src="/src/scripts/salam.min.js"></script>
<script>
    const code = `
layout:
    box:
        background color = "red"
        content = "Hello, World"
        font size = "50px"

        hover:
            background color = "yellow"
        end
    end
end
`;

    const res = window.mainSalam(["generator", "code", code, "--lang", "en"]);
    // console.log(res);

    if (res === 0) {
        console.log(window.generator.getGeneratedSource());
        console.log(window.generator.getGeneratedSourceC());
    } else {
        // Merge the error arrays only if they exist and are valid arrays
        const errors = [
            ...(Array.isArray(window.generator?.errors) ? window.generator.errors : []),
            ...(Array.isArray(window.parser?.ast?.errors) ? window.parser.ast.errors : []),
            ...(Array.isArray(window.validator?.errors) ? window.validator.errors : [])
        ];

        // Check if the merged errors array is non-empty and log it as an error
        if (errors.length > 0) {
            console.error("Compilation errors:", errors);
        }
    }

</script>
</body>
</html>